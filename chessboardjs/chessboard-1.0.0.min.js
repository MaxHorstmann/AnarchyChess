/*! chessboard.js v1.0.0 | (c) 2020 Chris Oakman | MIT License chessboardjs.com/license */
!function(){"use strict";for(var J=window.jQuery,F=16,A=16,e="abcdefghijklmnopqrstuvwxyz",W=[],r=0;r<A;r++)r<e.length?W.push(e[r]):W.push(r.toString());var n=20,G="â€¦",H="1.8.3",V=function(){for(var e={},r=0;r<A;r++)e[W[r]+2]="wP",e[W[r]+(F-1)]="bP";var n=0,t=A/8;for(r=0;r<t;r++)e[W[r]+1]="wR",e[W[A-r-1]+1]="wR",e[W[r]+F]="bR",e[W[A-r-1]+F]="bR";n+=t;var o=t;for(r=0;r<o;r++)e[W[r+n]+1]="wN",e[W[A-r-1-n]+1]="wN",e[W[r+n]+F]="bN",e[W[A-r-1-n]+F]="bN";n+=o;var a=t;for(r=0;r<a;r++)e[W[r+n]+1]="wB",e[W[A-r-1-n]+1]="wB",e[W[r+n]+F]="bB",e[W[A-r-1-n]+F]="bB";n+=a;var i=t;for(r=0;r<i;r++)e[W[r+n]+1]="wQ",e[W[A-r-1-n]+1]="wK",e[W[r+n]+F]="bQ",e[W[A-r-1-n]+F]="bK";return n+=i,e}(),t=200,o=200,a=60,i=30,s=100,Z={};function _(e,r,n){function t(){o=0,a&&(a=!1,s())}var o=0,a=!1,i=[],s=function(){o=window.setTimeout(t,r),e.apply(n,i)};return function(e){i=arguments,o?a=!0:s()}}function ee(){return"xxxx-xxxx-xxxx-xxxx-xxxx-xxxx-xxxx-xxxx".replace(/x/g,function(e){return(16*Math.random()|0).toString(16)})}function re(e){return JSON.parse(JSON.stringify(e))}function p(e){var r=e.split(".");return{major:parseInt(r[0],10),minor:parseInt(r[1],10),patch:parseInt(r[2],10)}}function ne(e,r){for(var n in r)if(r.hasOwnProperty(n))for(var t="{"+n+"}",o=r[n];-1!==e.indexOf(t);)e=e.replace(t,o);return e}function te(e){return"string"==typeof e}function oe(e){return"function"==typeof e}function c(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e}function u(e){return"fast"===e||"slow"===e||!!c(e)&&0<=e}function ae(e){if(!te(e))return!1;var r=e.split("-");return 2===r.length&&(ie(r[0])&&ie(r[1]))}function ie(e){return te(e)}function f(e){return te(e)&&-1!==e.search(/^[bw][KQRNBP]$/)}function se(e){if(!te(e))return!1;var r=(e=function(e){return e.replace(/8/g,"11111111").replace(/7/g,"1111111").replace(/6/g,"111111").replace(/5/g,"11111").replace(/4/g,"1111").replace(/3/g,"111").replace(/2/g,"11")}(e=e.replace(/ .+$/,""))).split("/");if(8!==r.length)return!1;for(var n=0;n<8;n++)if(8!==r[n].length||-1!==r[n].search(/[^kqrnbpKQRNBP1]/))return!1;return!0}function pe(e){if(!J.isPlainObject(e))return!1;for(var r in e)if(e.hasOwnProperty(r)&&(!ie(r)||!f(e[r])))return!1;return!0}function ce(){return typeof window.$&&J.fn&&J.fn.jquery&&function(e,r){e=p(e),r=p(r);var n=1e5*e.major*1e5+1e5*e.minor+e.patch;return 1e5*r.major*1e5+1e5*r.minor+r.patch<=n}(J.fn.jquery,H)}function ue(e){if(!se(e))return!1;for(var r,n=(e=e.replace(/ .+$/,"")).split("/"),t={},o=F,a=0;a<n.length;a++){for(var i=n[a].split(""),s=0,p=0;p<i.length;p++){if(-1!==i[p].search(/[1-8]/))s+=parseInt(i[p],10);else t[W[s]+o]=(r=i[p]).toLowerCase()===r?"b"+r.toUpperCase():"w"+r.toUpperCase(),s+=1}o-=1}return t}function fe(e){if(!pe(e))return!1;for(var r,n,t="",o=8,a=0;a<8;a++){for(var i=0;i<8;i++){var s=W[i]+o;e.hasOwnProperty(s)?t+=(r=e[s],n=void 0,"w"===(n=r.split(""))[0]?n[1].toUpperCase():n[1].toLowerCase()):t+="1"}7!==a&&(t+="/"),o-=1}return t=function(e){return e.replace(/11111111/g,"8").replace(/1111111/g,"7").replace(/111111/g,"6").replace(/11111/g,"5").replace(/1111/g,"4").replace(/111/g,"3").replace(/11/g,"2")}(t)}function de(e,r,n){for(var t=function(e){for(var r=[],n=0;n<A;n++)for(var t=0;t<F;t++){var o=W[n]+(t+1);e!==o&&r.push({square:o,distance:(a=e,i=o,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,s=a.split(""),p=W.indexOf(s[0])+1,c=parseInt(s[1],10),u=i.split(""),f=W.indexOf(u[0])+1,d=parseInt(u[1],10),h=Math.abs(p-f),l=Math.abs(c-d),l<=h?h:l)})}var a,i,s,p,c,u,f,d,h,l;r.sort(function(e,r){return e.distance-r.distance});var v=[];for(n=0;n<r.length;n++)v.push(r[n].square);return v}(n),o=0;o<t.length;o++){var a=t[o];if(e.hasOwnProperty(a)&&e[a]===r)return a}return!1}function he(e){return"black"!==e.orientation&&(e.orientation="white"),!1!==e.showNotation&&(e.showNotation=!0),!0!==e.draggable&&(e.draggable=!1),"trash"!==e.dropOffBoard&&(e.dropOffBoard="snapback"),!0!==e.sparePieces&&(e.sparePieces=!1),e.sparePieces&&(e.draggable=!0),e.hasOwnProperty("pieceTheme")&&(te(e.pieceTheme)||oe(e.pieceTheme))||(e.pieceTheme="img/chesspieces/wikipedia/{piece}.png"),u(e.appearSpeed)||(e.appearSpeed=t),u(e.moveSpeed)||(e.moveSpeed=o),u(e.snapbackSpeed)||(e.snapbackSpeed=a),u(e.snapSpeed)||(e.snapSpeed=i),u(e.trashSpeed)||(e.trashSpeed=s),function(e){return c(e)&&1<=e}(e.dragThrottleRate)||(e.dragThrottleRate=n),e}Z.alpha="alpha-d2270",Z.black="black-3c85d",Z.board="board-b72b1",Z.chessboard="chessboard-63f37",Z.clearfix="clearfix-7da63",Z.highlight1="highlight1-32417",Z.highlight2="highlight2-9c5d2",Z.notation="notation-322f9",Z.numeric="numeric-fc462",Z.piece="piece-417db",Z.row="row-5277c",Z.sparePieces="spare-pieces-7492f",Z.sparePiecesBottom="spare-pieces-bottom-ae20f",Z.sparePiecesTop="spare-pieces-top-4028b",Z.square="square-55d63",Z.white="white-1e1d7",window.Chessboard=function(e,f){if(!function(){if(ce())return!0;var e="Chessboard Error 1005: Unable to find a valid version of jQuery. Please include jQuery "+H+" or higher on the page\n\nExiting"+G;return window.alert(e),!1}())return null;var n=function(e){if(""===e){var r="Chessboard Error 1001: The first argument to Chessboard() cannot be an empty string.\n\nExiting"+G;return window.alert(r),!1}te(e)&&"#"!==e.charAt(0)&&(e="#"+e);var n=J(e);if(1===n.length)return n;var t="Chessboard Error 1003: The first argument to Chessboard() must be the ID of a DOM node, an ID query selector, or a single DOM node.\n\nExiting"+G;return window.alert(t),!1}(e);if(!n)return null;f=he(f=function(e){return"start"===e?e={position:re(V)}:se(e)?e={position:ue(e)}:pe(e)&&(e={position:re(e)}),J.isPlainObject(e)||(e={}),e}(f));var r=null,a=null,t=null,o=null,i={},s=2,p="white",c={},u=null,d=null,h=null,l=!1,v={},g={},w={},b=16;function m(e,r,n){if(!0===f.hasOwnProperty("showErrors")&&!1!==f.showErrors){var t="Chessboard Error "+e+": "+r;return"console"===f.showErrors&&"object"==typeof console&&"function"==typeof console.log?(console.log(t),void(2<=arguments.length&&console.log(n))):"alert"===f.showErrors?(n&&(t+="\n\n"+JSON.stringify(n)),void window.alert(t)):void(oe(f.showErrors)&&f.showErrors(e,r,n))}}function y(e){return oe(f.pieceTheme)?f.pieceTheme(e):te(f.pieceTheme)?ne(f.pieceTheme,{piece:e}):(m(8272,"Unable to build image source for config.pieceTheme."),"")}function P(e,r,n){var t='<img src="'+y(e)+'" ';return te(n)&&""!==n&&(t+='id="'+n+'" '),t+='alt="" class="{piece}" data-piece="'+e+'" style="width:'+b+"px;height:"+b+"px;",r&&(t+="display:none;"),ne(t+='" />',Z)}function x(e){var r=["wK","wQ","wR","wB","wN","wP"];"black"===e&&(r=["bK","bQ","bR","bB","bN","bP"]);for(var n="",t=0;t<r.length;t++)n+=P(r[t],!1,v[r[t]]);return n}function O(e,r,n,t){var o=J("#"+g[e]),a=o.offset(),i=J("#"+g[r]),s=i.offset(),p=ee();J("body").append(P(n,!0,p));var c=J("#"+p);c.css({display:"",position:"absolute",top:a.top,left:a.left}),o.find("."+Z.piece).remove();var u={duration:f.moveSpeed,complete:function(){i.append(P(n)),c.remove(),oe(t)&&t()}};c.animate(s,u)}function S(e,r,n){var t=J("#"+v[e]).offset(),o=J("#"+g[r]),a=o.offset(),i=ee();J("body").append(P(e,!0,i));var s=J("#"+i);s.css({display:"",position:"absolute",left:t.left,top:t.top});var p={duration:f.moveSpeed,complete:function(){o.find("."+Z.piece).remove(),o.append(P(e)),s.remove(),oe(n)&&n()}};s.animate(a,p)}function T(){for(var e in r.find("."+Z.piece).remove(),c)c.hasOwnProperty(e)&&J("#"+g[e]).append(P(c[e]))}function q(){r.html(function(e){"black"!==e&&(e="white");var r="",n=re(W),t=F;"black"===e&&(n.reverse(),t=1);for(var o="white",a=0;a<F;a++){r+='<div class="{row}">';for(var i=0;i<A;i++){var s=n[i]+t;r+='<div class="{square} '+Z[o]+" square-"+s+'" style="width:'+b+"px;height:"+b+'px;" id="'+g[s]+'" data-square="'+s+'">',f.showNotation&&(("white"===e&&1===t||"black"===e&&8===t)&&(r+='<div class="{notation} {alpha}">'+n[i]+"</div>"),0===i&&(r+='<div class="{notation} {numeric}">'+t+"</div>")),r+="</div>",o="white"===o?"black":"white"}r+='<div class="{clearfix}"></div></div>',o="white"===o?"black":"white","white"===e?t-=1:t+=1}return ne(r,Z)}(p,f.showNotation)),T(),f.sparePieces&&("white"===p?(t.html(x("black")),o.html(x("white"))):(t.html(x("white")),o.html(x("black"))))}function k(e){var r=re(c),n=re(e);oe(f.onChange)&&f.onChange(r,n),c=e}function C(e,r){for(var n in w)if(w.hasOwnProperty(n)){var t=w[n];if(e>=t.left&&e<t.left+b&&r>=t.top&&r<t.top+b)return n}return"offboard"}function E(){r.find("."+Z.square).removeClass(Z.highlight1+" "+Z.highlight2)}function B(){E();var e=re(c);delete e[h],k(e),T(),a.fadeOut(f.trashSpeed),l=!1}function N(e,r,n,t){oe(f.onDragStart)&&!1===f.onDragStart(e,r,re(c),p)||(l=!0,u=r,d="spare"===(h=e)?"offboard":e,function(){for(var e in w={},g)g.hasOwnProperty(e)&&(w[e]=J("#"+g[e]).offset())}(),a.attr("src",y(r)).css({display:"",position:"absolute",left:n-b/2,top:t-b/2}),"spare"!==e&&J("#"+g[e]).addClass(Z.highlight1).find("."+Z.piece).css("display","none"))}function I(e,r){a.css({left:e-b/2,top:r-b/2});var n=C(e,r);n!==d&&(ie(d)&&J("#"+g[d]).removeClass(Z.highlight2),ie(n)&&J("#"+g[n]).addClass(Z.highlight2),oe(f.onDragMove)&&f.onDragMove(n,d,h,u,re(c),p),d=n)}function j(e){var r="drop";if("offboard"===e&&"snapback"===f.dropOffBoard&&(r="snapback"),"offboard"===e&&"trash"===f.dropOffBoard&&(r="trash"),oe(f.onDrop)){var n=re(c);"spare"===h&&ie(e)&&(n[e]=u),ie(h)&&"offboard"===e&&delete n[h],ie(h)&&ie(e)&&(delete n[h],n[e]=u);var t=re(c),o=f.onDrop(h,e,u,n,t,p);"snapback"!==o&&"trash"!==o||(r=o)}"snapback"===r?function(){if("spare"!==h){E();var e=J("#"+g[h]).offset(),r={duration:f.snapbackSpeed,complete:function(){T(),a.css("display","none"),oe(f.onSnapbackEnd)&&f.onSnapbackEnd(u,h,re(c),p)}};a.animate(e,r),l=!1}else B()}():"trash"===r?B():"drop"===r&&function(e){E();var r=re(c);delete r[h],r[e]=u,k(r);var n=J("#"+g[e]).offset(),t={duration:f.snapSpeed,complete:function(){T(),a.css("display","none"),oe(f.onSnapEnd)&&f.onSnapEnd(h,e,u)}};a.animate(n,t),l=!1}(e)}function M(e){e.preventDefault()}function R(e){if(f.draggable){var r=J(this).attr("data-square");ie(r)&&c.hasOwnProperty(r)&&N(r,c[r],e.pageX,e.pageY)}}function D(e){if(f.draggable){var r=J(this).attr("data-square");ie(r)&&c.hasOwnProperty(r)&&(e=e.originalEvent,N(r,c[r],e.changedTouches[0].pageX,e.changedTouches[0].pageY))}}function Q(e){f.sparePieces&&N("spare",J(this).attr("data-piece"),e.pageX,e.pageY)}function X(e){f.sparePieces&&N("spare",J(this).attr("data-piece"),(e=e.originalEvent).changedTouches[0].pageX,e.changedTouches[0].pageY)}i.clear=function(e){i.position({},e)},i.destroy=function(){n.html(""),a.remove(),n.unbind()},i.fen=function(){return i.position("fen")},i.flip=function(){return i.orientation("flip")},i.move=function(){if(0!==arguments.length){for(var e=!0,r={},n=0;n<arguments.length;n++)if(!1!==arguments[n])if(ae(arguments[n])){var t=arguments[n].split("-");r[t[0]]=t[1]}else m(2826,"Invalid move passed to the move method.",arguments[n]);else e=!1;var o=function(e,r){var n=re(e);for(var t in r)if(r.hasOwnProperty(t)&&n.hasOwnProperty(t)){var o=n[t];delete n[t],n[r[t]]=o}return n}(c,r);return i.position(o,e),o}},i.orientation=function(e){return 0===arguments.length?p:"white"===e||"black"===e?(p=e,q(),p):"flip"===e?(p="white"===p?"black":"white",q(),p):void m(5482,"Invalid value passed to the orientation method.",e)},i.position=function(e,r){if(0===arguments.length)return re(c);if(te(e)&&"fen"===e.toLowerCase())return fe(c);(te(e)&&"start"===e.toLowerCase()&&(e=re(V)),se(e)&&(e=ue(e)),pe(e))?(!1!==r&&(r=!0),r?(function(e,r,n){if(0!==e.length)for(var t=0,o=0;o<e.length;o++){var a=e[o];"clear"===a.type?J("#"+g[a.square]+" ."+Z.piece).fadeOut(f.trashSpeed,i):"add"!==a.type||f.sparePieces?"add"===a.type&&f.sparePieces?S(a.piece,a.square,i):"move"===a.type&&O(a.source,a.destination,a.piece,i):J("#"+g[a.square]).append(P(a.piece,!0)).find("."+Z.piece).fadeIn(f.appearSpeed,i)}function i(){(t+=1)===e.length&&(T(),oe(f.onMoveEnd)&&f.onMoveEnd(re(r),re(n)))}}(function(e,r){e=re(e),r=re(r);var n=[],t={};for(var o in r)r.hasOwnProperty(o)&&e.hasOwnProperty(o)&&e[o]===r[o]&&(delete e[o],delete r[o]);for(o in r)if(r.hasOwnProperty(o)){var a=de(e,r[o],o);a&&(n.push({type:"move",source:a,destination:o,piece:r[o]}),delete e[a],delete r[o],t[o]=!0)}for(o in r)r.hasOwnProperty(o)&&(n.push({type:"add",square:o,piece:r[o]}),delete r[o]);for(o in e)e.hasOwnProperty(o)&&(t.hasOwnProperty(o)||(n.push({type:"clear",square:o,piece:e[o]}),delete e[o]));return n}(c,e),c,e),k(e)):(k(e),T())):m(6482,"Invalid value passed to the position method.",e)},i.resize=function(){b=function(){var e=parseInt(n.width(),10);if(!e||e<=0)return 0;for(var r=e-1;r%A!=0&&0<r;)r-=1;return r/A}(),r.css("width",b*A+"px"),a.css({height:b,width:b}),f.sparePieces&&n.find("."+Z.sparePieces).css("paddingLeft",b+s+"px"),q()},i.start=function(e){i.position("start",e)};var Y=_(function(e){l&&I(e.pageX,e.pageY)},f.dragThrottleRate),K=_(function(e){l&&(e.preventDefault(),I(e.originalEvent.changedTouches[0].pageX,e.originalEvent.changedTouches[0].pageY))},f.dragThrottleRate);function L(e){l&&j(C(e.pageX,e.pageY))}function U(e){l&&j(C(e.originalEvent.changedTouches[0].pageX,e.originalEvent.changedTouches[0].pageY))}function $(e){if(!l&&oe(f.onMouseoverSquare)){var r=J(e.currentTarget).attr("data-square");if(ie(r)){var n=!1;c.hasOwnProperty(r)&&(n=c[r]),f.onMouseoverSquare(r,n,re(c),p)}}}function z(e){if(!l&&oe(f.onMouseoutSquare)){var r=J(e.currentTarget).attr("data-square");if(ie(r)){var n=!1;c.hasOwnProperty(r)&&(n=c[r]),f.onMouseoutSquare(r,n,re(c),p)}}}return p=f.orientation,f.hasOwnProperty("position")&&("start"===f.position?c=re(V):se(f.position)?c=ue(f.position):pe(f.position)?c=re(f.position):m(7263,"Invalid value passed to config.position.",f.position)),function(){!function(){for(var e=0;e<A;e++)for(var r=1;r<=F;r++){var n=W[e]+r;g[n]=n+"-"+ee()}var t="KQRNBP".split("");for(e=0;e<t.length;e++){var o="w"+t[e],a="b"+t[e];v[o]=o+"-"+ee(),v[a]=a+"-"+ee()}}(),n.html(function(e){var r='<div class="{chessboard}">';return e&&(r+='<div class="{sparePieces} {sparePiecesTop}"></div>'),r+='<div class="{board}"></div>',e&&(r+='<div class="{sparePieces} {sparePiecesBottom}"></div>'),ne(r+="</div>",Z)}(f.sparePieces)),r=n.find("."+Z.board),f.sparePieces&&(t=n.find("."+Z.sparePiecesTop),o=n.find("."+Z.sparePiecesBottom));var e=ee();J("body").append(P("wP",!0,e)),a=J("#"+e),s=parseInt(r.css("borderLeftWidth"),10),i.resize()}(),function(){J("body").on("mousedown mousemove","."+Z.piece,M),r.on("mousedown","."+Z.square,R),n.on("mousedown","."+Z.sparePieces+" ."+Z.piece,Q),r.on("mouseenter","."+Z.square,$).on("mouseleave","."+Z.square,z);var e=J(window);e.on("mousemove",Y).on("mouseup",L),"ontouchstart"in document.documentElement&&(r.on("touchstart","."+Z.square,D),n.on("touchstart","."+Z.sparePieces+" ."+Z.piece,X),e.on("touchmove",K).on("touchend",U))}(),i},window.ChessBoard=window.Chessboard,window.Chessboard.fenToObj=ue,window.Chessboard.objToFen=fe}(),"undefined"!=typeof exports&&(exports.Chessboard=window.Chessboard);